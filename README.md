# Облачное хранилище файлов

Многопользовательское файловое облако, которое позволяет пользователям загружать, хранить и управлять файлами. Источником вдохновения для проекта является **Google Drive**.

## Стек технологий

- **Backend**: Spring Boot, Spring Security, Spring Sessions, Flyway
- **База данных**: PostgreSQL
- **Хранилище файлов**: MinIO
- **Кэширование и сессии**: Redis
- **Контейнеризация**: Docker, Docker Compose
- **Frontend**: Bootstrap, HTML, CSS, Thymeleaf
- **Тестирование**: JUnit, Testcontainers, интеграционное тестирование

---

## Функционал приложения

### Работа с пользователями:
- **Регистрация**: Новые пользователи могут создать учетную запись.
- **Авторизация**: Пользователи могут войти в систему.
- **Logout**: Пользователи могут выйти из системы.

### Работа с файлами и папками:
- **Загрузка (upload)**: Пользователи могут загружать файлы и папки.
- **Удаление**: Пользователи могут удалять файлы и папки.
- **Переименование**: Пользователи могут переименовывать файлы и папки.
- **Скачивание**: Пользователи могут скачивать свои файлы.

---

## Особенности реализации

### Управление доступом
За авторизацию и управление доступом к страницам отвечает **Spring Security**. Это обеспечивает безопасность приложения и защиту пользовательских данных.

### Хранение сессий
По умолчанию Spring Boot хранит сессии внутри приложения, и они теряются после каждого перезапуска. В данном проекте используется **Redis** для хранения сессий. Redis — это NoSQL хранилище с поддержкой TTL (time to live), что делает его удобным для хранения сессий. Истекшие сессии автоматически удаляются. Подробнее можно узнать [здесь](https://www.baeldung.com/spring-session).

### Хранилище файлов
Файлы хранятся в **MinIO**, которое представляет собой высокопроизводительное объектное хранилище, совместимое с Amazon S3 API.

---

## Как запустить проект локально

1. **Клонируйте репозиторий**:
   ```bash
   git clone git@github.com:v1adis1av28/CloudStorage.git
    ```
2. **Перейдите в коревую папку проекта:**
    ```
    cd CloudStorage && cd demo
    ```
3. **Создайте файл .env и добавьте в него значения**:
- SPRING_PROFILES_ACTIVE=prod
- SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/CloudStorage
- SPRING_DATASOURCE_USERNAME=postgres
- SPRING_DATASOURCE_PASSWORD=postgres
- REDIS_HOST=redis
- MINIO_HOST=minio
- POSTGRES_USER=postgres
- POSTGRES_PASSWORD=vlad
- POSTGRES_DB=CloudStorage
- MINIO_ROOT_USER=minioadmin
- MINIO_ROOT_PASSWORD=minioadmin

4. **Запустите проект с помощью Docker Compose**:
    ```
    docker-compose up --build
    ```
5. **Открыть приложение можно в браузере**:
    ```
    http://localhost:8080/
    ```
